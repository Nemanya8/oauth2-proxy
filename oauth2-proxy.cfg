## OAuth2 Proxy Config
## Google OAuth with @parity.io email restriction

# OAuth Provider
provider = "google"
provider_display_name = "Google"

# Google OAuth Credentials (set via environment variables)
# client_id = "YOUR_CLIENT_ID.apps.googleusercontent.com"
# client_secret = "YOUR_CLIENT_SECRET"

# Restrict to parity.io domain
email_domains = [
  "parity.io"
]

# Upstream application (your internal Docker app)
upstreams = [
  "http://internal-app:3001"
]

# HTTP settings
http_address = "0.0.0.0:4180"

# Cookie settings
cookie_name = "_oauth2_proxy"
# cookie_secret is set via environment variable OAUTH2_PROXY_COOKIE_SECRET
cookie_secure = false  # Set to true for production with HTTPS

cookie_httponly = true
cookie_samesite = "lax"

# Redirect URL (adjust to your domain)
redirect_url = "http://localhost:4180/oauth2/callback"

# Session settings
cookie_expire = "168h"  # 7 days
cookie_refresh = "1h"

# Logging
request_logging = true
auth_logging = true
standard_logging = true

# Security
skip_provider_button = false
